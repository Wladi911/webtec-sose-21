<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel= "stylesheet" href="style.css">
    <script src="js/zumWarenkorbHinzufuegen.js"></script>

    

    

</head>

<body> 
  <header>

    <a href="startseite.html">
      <div class="imagecontainer">
        <img src="Logo.jpg" class="headerimg" alt="Logo der Webseite"/></a>
      </div> 

      <nav class="navigation">
        <a href="startseite.html">Startseite</a> |
        <a href="kontakt.html">Kontakt</a> | 
        <a href="impressum.html">Impressum</a>
        <a href="warenkorb.html"><span style="float: right">Warenkorb</span></a>     
     </nav>
</header>

<main>
  <article>
    <h2>Warenkorb</h2>
    
    <table id="customers">
     <thead>
      <tr>
        <th>Bild</th>
        <th>Produkt</th>
        <th>Hersteller</th>
        <th>Preis</th>
      </tr>
     </thead>
     <tbody id="warenkorb"></tbody>

     </table>

    </article>

 </main>  
 <footer>

  © Josephat Lema, Wladislaw Reschetnik – 2021 

</footer>
        
    <script>

      function warenkorbtabelle() {
        let warenkorb = JSON.parse(localStorage.getItem('warenkorb'))

        let tabelle = document.getElementById('warenkorb')
        tabelle.innerHTML = ""
        if (warenkorb){
          for (let i = 0; i < warenkorb.length; i++){
            let element = document.createElement('tr')
            let produktbild = document.createElement('td')
            produktbild.innerHTML = "<img class='produktbildklein' src= "+ warenkorb[i].bild_url + ">"
            element.appendChild(produktbild)

            let pname = document.createElement('td')
            pname.textContent = warenkorb[i].produktname
            element.appendChild(pname)

            let phersteller = document.createElement('td')
            phersteller.textContent = warenkorb[i].produkthersteller
            element.appendChild(phersteller)

            let ppreis = document.createElement('td')
            ppreis.textContent = warenkorb[i].produktpreis
            element.appendChild(ppreis)

            let produktlöschen = document.createElement('td')
            produktlöschen.innerHTML = "<button onklick=pLöschen>Löschen</button>"
            /* produktlöschen.innerHTML = "<button onklick=pLöschen (" + i + ") id=" + i + ">Löschen</button>" */
            element.appendChild(produktlöschen)

            tabelle.appendChild(element)

          }

          
        }
      }
      warenkorbtabelle ()


        function pLöschen(id) {
        let warenkorb = JSON.parse(localStorage.getItem('warenkorb'))
        warenkorb.splice(id, 1)
        localStorage.setItem('warenkorb', JSON.stringify(warenkorb)) 
        warenkorbtabelle()
      } 
     
    </script>
</body>
</html>